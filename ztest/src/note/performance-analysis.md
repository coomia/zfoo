#服务器无响应线上问题分析
1. 发现问题，有用户无法连接服务器

2. 因为是集群，先定位哪个服务器出了问题
    1. zookeeper #通过zookeeper查看服务器集群，看看业务逻辑服临时节点是否还在，在的说明还有心跳
    2. redis，不需要查看redis集群，因为业务是先查看缓存，缓存没有再查库，即使出问题也不影响正常的业务
    3. 数据库集群，通过自己写的工具查看数据服务器，一般数据服务器磁盘有没有满，有心跳，就没有多大问题
    4. 排除了redis缓存集群和数据库集群后，剩下的就是业务集群和登录集群
    
3. 业务集群排查，最可能出问题的是业务集群，因为代码量最大，最容易出错，登录服逻辑相对简单
    1. uptime       #查看CPU的Load情况，Load越高说明问题越严重
    2. free -m      #查看内存
    3. df           #查看磁盘空间
    4. netstat      #查看网络状态
    5. ping         #能否连接其它服务器
    
4. 然后再排查是不是jvm的问题
    1. jps      #查看相关的java进程是否还在运行
    2. jstack   #定位死循环、线程阻塞、死锁，因为业务逻辑是最复杂最容易出错的，所以先定位上业务是否有问题
    3. jmap     #查看是否有内存泄漏，查看大对象，如果Java的集合类使用不当，可能导致很多类没有被释放，依然有引用，这也是最容易出错的地方之一；
                #也可使用Eclipse的MAT（Memory Analyzer Tool）来分析dump文件，这样可以更加清晰一点，查找java.lang.ref.Finalizer
    4. jstat    #查看FGC发生的频率及FGC所花费的时间，FGC发生的频率越快、花费的时间越高，问题越严重，会stop world
    5. 


#服务器线上环境配置

##网关服
- 三个网关服务器，可以横向扩展，理论上可以支持无限的流量
```
gate 1000M bit 上传和下载可以达到100MB/s
gate的网卡是100Mb/s
```


